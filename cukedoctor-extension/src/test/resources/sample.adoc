:toc: right
:backend: html5
:doctitle: Living Documentation
:doctype: book
:icons: font
:!numbered:
:!linkcss:
:sectanchors:
:sectlink:
:docinfo:
:toclevels: 3

= *Living Documentation*

++++
<span style="float:right">
	<input value="Filter..." onclick="this.value=''" title="Filter features by title" onblur="searchFeature(this.value);"/>
</span>	
++++
== *Summary*
[cols="12*^m", options="header,footer"]
|===
3+|Scenarios 7+|Steps 2+|Features: 1

|[green]#*Passed*#
|[red]#*Failed*#
|Total
|[green]#*Passed*#
|[red]#*Failed*#
|[purple]#*Skipped*#
|[maroon]#*Pending*#
|[yellow]#*Undefined*#
|[blue]#*Missing*#
|Total
|Duration
|Status

12+^|*<<Sample-test>>*
|2
|1
|3
|6
|1
|0
|0
|0
|0
|7
|10s 152ms
|[red]#*failed*#
12+^|*Totals*
|2|1|3|6|1|0|0|0|0|7 2+|10s 152ms
|===

== *Features*

[[Sample-test, Sample test]]
=== *Sample test*

++++
<span class="fa fa-minus-square fa-fw" style="cursor:pointer;float:right;margin-top:-30px" title="minimize" onclick="hideFeatureScenarios('Sample-test');document.getElementById('hidden-Sample-test').style.display = 'inline';this.style.display = 'none'">  </span>

<span id="hidden-Sample-test" class="fa fa-plus-square fa-fw" style="cursor:pointer;float:right;display:none;margin-top:-30px" title="maximize feature" onclick="showFeatureScenarios('Sample-test'); this.style.display = 'none'">  </span>
++++
****
As a user  +
I want to do something  +
In order to achieve an important goal
****

==== Scenario Outline: Parsing scenarios with multiple examples

[feature]
scenario with examples

.examples1
[cols="1*", options="header"]
|===
|status
|passes
|fails
|===

.examples2
[cols="1*", options="header"]
|===
|status
|passes
|===

==== Scenario: Basic
****
Given ::
I navigate to the home page icon:thumbs-up[role="green",title="Passed"] [small right]#(044ms)#
When ::
I do something icon:thumbs-up[role="green",title="Passed"] [small right]#(044ms)#
Then ::
I see the text 'Home' icon:thumbs-up[role="green",title="Passed"] [small right]#(001ms)#
****

==== Scenario: Basic failure
****
Given ::
I navigate to the home page icon:thumbs-up[role="green",title="Passed"] [small right]#(040ms)#
Then ::
I see the text 'Hacienda' icon:thumbs-down[role="red",title="Failed"] [small right]#(10s 017ms)#

IMPORTANT: expected to find text "Hacienda" in "Home | Login Clinical Studies some engaging copy View Available Studies" (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/study_admin_steps.rb:14:in `/^I see the text '(.+)'$/'
features/test_outline.feature:15:in `Then I see the text 'Hacienda''
****


++++
<script type="text/javascript">
	function showFeatureScenarios(featureId){
		var element = document.getElementById(featureId).parentNode;
		for (var i = 0; i < element.childNodes.length; i++) {
    		if (element.childNodes[i].className == "sect3" || element.childNodes[i].className == "fa fa-minus-square fa-fw") {
      		     element.childNodes[i].style.display = 'inline';
    			}
    		if (element.childNodes[i].className == "sidebarblock") {
      		     element.childNodes[i].style.display = 'block';
    			}			        
		}
		 
 		document.getElementById(featureId).childNodes[0].click();
	}

	function hideFeatureScenarios(featureId){
		var element = document.getElementById(featureId).parentNode;
		for (var i = 0; i < element.childNodes.length; i++) {
    		if (element.childNodes[i].className == "sect3" || element.childNodes[i].className == "sidebarblock") { 
      		     element.childNodes[i].style.display = 'none';	   		    
                 	}
		      
		}
	   document.getElementById(featureId).childNodes[0].click();
 	}

</script>
++++
++++
<script type = "text/javascript" >
var allLevel2ListItens = null;

function searchFeature(criteria) {
    if (criteria != null && criteria.length >= 3) {
        var sect2List = document.getElementsByClassName("sect2");
        var firstMatch = null;
        if (sect2List != null) {
            for (var i = 0; i < sect2List.length; i++) {
                var h3 = null;
                for (var j = 0; j < sect2List[i].childNodes.length; j++) {
                    if (sect2List[i].childNodes[j].tagName && sect2List[i].childNodes[j].tagName.toUpperCase() == "H3") {
                        h3 = sect2List[i].childNodes[j];
                        break;
                    }
                }
                if (h3 != null && h3.id != null) {
                    if (!h3.id.toLowerCase().match(criteria.toLowerCase())) {
                        sect2List[i].style.display = 'none';
                    } else {//match
                        sect2List[i].style.display = 'inline';
                        if (firstMatch == null) {
                            //used to scroll to after search
                            firstMatch = h3;
                        }
                        //filter toc
                        filterToc(criteria);
                    }
                }
            }//end for

        }//sect2List != null
        if (firstMatch != null) {
            animate(document.body, "scrollTop", "", 0, firstMatch.offsetTop, 200, true);
        }


    }//end criteria.length >=3
    else {//clear search
        clearSearch();
    }
}

function clearSearch() {
    var sect2List = document.getElementsByClassName("sect2");
    if (sect2List != null) {
        for (var i = 0; i < sect2List.length; i++) {
            sect2List[i].style.display = 'inline';
        }//end for
    }//end elements != null

    if (allLevel2ListItens == null) {
        collectallLevel2IListItens();
    }
    for (var z = 0; z < allLevel2ListItens.length; z++) {
        allLevel2ListItens[z].style.display = 'inline';
    }
    if (document.getElementById('input-search')) {
        document.getElementById('input-search').value = 'Filter...';
    }
}

function filterToc(criteria) {
    if (allLevel2ListItens == null) {
        collectallLevel2IListItens();
    }
    for (var z = 0; z < allLevel2ListItens.length; z++) {
        if (allLevel2ListItens[z].childNodes[0].tagName && allLevel2ListItens[z].childNodes[0].tagName.toLowerCase() == "a") {
            if (allLevel2ListItens[z].childNodes[0].getAttribute("href").toUpperCase().substring(1).match(criteria.toUpperCase())) {
                allLevel2ListItens[z].style.display = 'inline';
            } else {
                allLevel2ListItens[z].style.display = 'none';
            }
        }
    }//end for allListItens
}

function animate(elem, style, unit, from, to, time, prop) {
    if (!elem) return;
    var start = new Date().getTime(),
        timer = setInterval(function () {
            var step = Math.min(1, (new Date().getTime() - start) / time);
            if (prop) {
                elem[style] = (from + step * (to - from)) + unit;
            } else {
                elem.style[style] = (from + step * (to - from)) + unit;
            }
            if (step == 1) clearInterval(timer);
        }, 25);
    elem.style[style] = from + unit;
}

function collectallLevel2IListItens() {
    allLevel2ListItens = new Array();
    var uls = document.getElementsByClassName('sectlevel2');
    for (var i = 0; i < uls.length; i++) {
        for (var j = 0; j < uls[i].childNodes.length; j++) {
            if (uls[i].childNodes[j].tagName) {
                if (uls[i].childNodes[j].tagName.toLowerCase() == 'li') {
                    allLevel2ListItens.push(uls[i].childNodes[j]);
                }

            }


        } //end for uls child
    }//end for uls

}
</script>
++++
